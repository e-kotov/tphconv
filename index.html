<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Convert Transport Poverty Hub Data to Rasters and Vectors • tphconv</title>
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="deps/headroom-0.11.0/headroom.min.js"></script><script src="deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="deps/search-1.0.0/fuse.min.js"></script><script src="deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Convert Transport Poverty Hub Data to Rasters and Vectors">
<meta name="description" content="Convert Transport Poverty Hub Data to Rasters and Vectors. The source data comes in CSV files with coordinates in WGS84 (EPSG:4326). To work with this data more efficiently, this package provides helper functions to quickly convert this data to spatial raster grids and vector polygon grids.">
<meta property="og:description" content="Convert Transport Poverty Hub Data to Rasters and Vectors. The source data comes in CSV files with coordinates in WGS84 (EPSG:4326). To work with this data more efficiently, this package provides helper functions to quickly convert this data to spatial raster grids and vector polygon grids.">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="index.html">tphconv</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="reference/index.html">Reference</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="search.json">
</form></li>
      </ul>
</div>


  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header"><h1 id="tphconv-convert-transport-poverty-hub-data-to-rasters-and-vectors">tphconv: Convert Transport Poverty Hub Data to Rasters and Vectors<a class="anchor" aria-label="anchor" href="#tphconv-convert-transport-poverty-hub-data-to-rasters-and-vectors"></a>
</h1></div>
</div>
<div class="section level1">
<h1 id="overview">Overview<a class="anchor" aria-label="anchor" href="#overview"></a>
</h1>
<p><strong>tphconv</strong> is an R package for converting public transport accessibility data from the Transport Poverty Hub into spatial formats. It’s designed to:</p>
<ul class="task-list">
<li><label><input type="checkbox" checked>Read gzipped CSV files containing point-based accessibility measures (e.g., number of people reachable within 10–20 minutes by public transport).</label></li>
<li><label><input type="checkbox" checked>Reproject WGS84 (EPSG:4326) coordinates into a target grid (default EPSG:3035) and perform necessary offset for the data to line up with GISCO INSPIRE grids (<a href="https://ec.europa.eu/eurostat/web/gisco/geodata/grids" class="external-link uri">https://ec.europa.eu/eurostat/web/gisco/geodata/grids</a>, <a href="https://ec.europa.eu/eurostat/web/gisco/geodata/population-distribution/population-grids" class="external-link uri">https://ec.europa.eu/eurostat/web/gisco/geodata/population-distribution/population-grids</a>).</label></li>
<li><label><input type="checkbox" checked>Rasterize the point data onto a regular grid (e.g., 1 km resolution) or generate vector polygon grids.</label></li>
<li><label><input type="checkbox">Convert to vector polygons for further analysis.</label></li>
</ul>
<p>This makes it easy to integrate transport accessibility information into GIS workflows for analysis and visualization.</p>
</div>
<div class="section level1">
<h1 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h1>
<p>You can install the development version of <strong>tphconv</strong> from GitHub:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># install.packages("remotes")</span></span>
<span><span class="fu">remotes</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">"ekotov/tphconv"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level1">
<h1 id="data-source">Data Source<a class="anchor" aria-label="anchor" href="#data-source"></a>
</h1>
<p>Accessibility data is provided by the <a href="https://jeodpp.jrc.ec.europa.eu/eu/vaas/voila/render/mobitrans/transportpoverty/TransportPovertyHub.ipynb" class="external-link">Transport Poverty Hub Dashboard</a>, which requires a free EU account to log in. The dashboard allows you to download precomputed CSV files on a 1 km grid for various countries, including Luxembourg.</p>
<p>Once you have downloaded a file (e.g., <code>ver1_0_LU_1km_pt_ppl_within_10-20_min.csv.gz</code>), you can point <strong>tphconv</strong> to it directly.</p>
</div>
<div class="section level1">
<h1 id="usage-examples">Usage Examples<a class="anchor" aria-label="anchor" href="#usage-examples"></a>
</h1>
<p>Most defaults should work as long as the data provider does not change the format of the CSV files. The package is designed to handle the standard format used by the Transport Poverty Hub, but arguments can be adjusted if necessary.</p>
<div class="section level2">
<h2 id="convert-a-csv-to-a-raster">Convert a CSV to a Raster<a class="anchor" aria-label="anchor" href="#convert-a-csv-to-a-raster"></a>
</h2>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="http://www.ekotov.pro/tphconv/">tphconv</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Locate the example data shipped with the package</span></span>
<span><span class="va">tph_file</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span></span>
<span>  <span class="st">"extdata"</span>,</span>
<span>  <span class="st">"ver1_0_LU_1km_pt_ppl_within_10-20_min.csv.gz"</span>,</span>
<span>  package <span class="op">=</span> <span class="st">"tphconv"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Convert to a SpatRaster</span></span>
<span><span class="va">raster_layer</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/tph_to_raster.html">tph_to_raster</a></span><span class="op">(</span>input_file <span class="op">=</span> <span class="va">tph_file</span><span class="op">)</span></span>
<span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://rspatial.org/" class="external-link">terra</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">raster_layer</span><span class="op">)</span></span></code></pre></div>
<p><img src="reference/figures/luxembourg.png"></p>
</div>
<div class="section level2">
<h2 id="write-raster-to-disk">Write Raster to Disk<a class="anchor" aria-label="anchor" href="#write-raster-to-disk"></a>
</h2>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">tmp_file</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempfile</a></span><span class="op">(</span>fileext <span class="op">=</span> <span class="st">".tiff"</span><span class="op">)</span></span>
<span><span class="va">output_path</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/tph_to_raster.html">tph_to_raster</a></span><span class="op">(</span></span>
<span>  input_file <span class="op">=</span> <span class="va">tph_file</span>,</span>
<span>  out_raster_file <span class="op">=</span> <span class="va">tmp_file</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Check the output</span></span>
<span><span class="va">g</span> <span class="op">&lt;-</span> <span class="fu">terra</span><span class="fu">::</span><span class="fu"><a href="https://rspatial.github.io/terra/reference/rast.html" class="external-link">rast</a></span><span class="op">(</span><span class="va">output_path</span><span class="op">)</span></span>
<span><span class="va">g</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/unlink.html" class="external-link">unlink</a></span><span class="op">(</span><span class="va">tmp_file</span><span class="op">)</span>  <span class="co"># Clean up temporary file</span></span></code></pre></div>
<div class="sourceCode" id="cb4"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a>class       <span class="sc">:</span> SpatRaster </span>
<span id="cb4-2"><a href="#cb4-2" tabindex="-1"></a>size        <span class="sc">:</span> <span class="dv">80</span>, <span class="dv">55</span>, <span class="dv">1</span>  (nrow, ncol, nlyr)</span>
<span id="cb4-3"><a href="#cb4-3" tabindex="-1"></a>resolution  <span class="sc">:</span> <span class="dv">1000</span>, <span class="dv">1000</span>  (x, y)</span>
<span id="cb4-4"><a href="#cb4-4" tabindex="-1"></a>extent      <span class="sc">:</span> <span class="dv">4016000</span>, <span class="dv">4071000</span>, <span class="dv">2935000</span>, <span class="dv">3015000</span>  (xmin, xmax, ymin, ymax)</span>
<span id="cb4-5"><a href="#cb4-5" tabindex="-1"></a>coord. ref. <span class="sc">:</span> ETRS89<span class="sc">-</span>extended <span class="sc">/</span> LAEA <span class="fu">Europe</span> (EPSG<span class="sc">:</span><span class="dv">3035</span>) </span>
<span id="cb4-6"><a href="#cb4-6" tabindex="-1"></a>source      <span class="sc">:</span> file10888755abebd.tiff </span>
<span id="cb4-7"><a href="#cb4-7" tabindex="-1"></a>name        <span class="sc">:</span> opportunities_people </span>
<span id="cb4-8"><a href="#cb4-8" tabindex="-1"></a>min value   <span class="sc">:</span>                    <span class="dv">0</span> </span>
<span id="cb4-9"><a href="#cb4-9" tabindex="-1"></a>max value   <span class="sc">:</span>                <span class="dv">61065</span> </span></code></pre></div>
</div>
</div>
<div class="section level1">
<h1 id="functions">Functions<a class="anchor" aria-label="anchor" href="#functions"></a>
</h1>
<ul>
<li>
<code><a href="reference/tph_to_raster.html">tph_to_raster()</a></code> – Reads a CSV, reprojects, and rasterizes accessibility data into a SpatRaster or writes it to disk.</li>
</ul>
</div>
<div class="section level1">
<h1 id="license--citation">License &amp; Citation<a class="anchor" aria-label="anchor" href="#license--citation"></a>
</h1>
<p>Licensed under MIT. Data from the Transport Poverty Hub Dashboard is available under CC-BY-4.0, with reuse policy outlined by the <a href="https://eur-lex.europa.eu/legal-content/EN/TXT/?uri=CELEX:32011D0833" class="external-link">EU Commission Decision of 12 December 2011</a>.</p>
</div>

  </main><aside class="col-md-3"><div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://opensource.org/licenses/mit-license.php" class="external-link">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a></small></li>
</ul>
</div>

<div class="community">
<h2 data-toc-skip>Community</h2>
<ul class="list-unstyled">
<li><a href="CONTRIBUTING.html">Contributing guide</a></li>
<li><a href="CODE_OF_CONDUCT.html">Code of conduct</a></li>
<li><a href="SUPPORT.html">Getting help</a></li>
</ul>
</div>

<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing tphconv</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Egor Kotov <br><small class="roles"> Author, maintainer, copyright holder </small> <a href="https://orcid.org/0000-0001-6690-5345" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a>  </li>
</ul>
</div>



  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Egor Kotov.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>
