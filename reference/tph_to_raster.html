<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-GB"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Convert Transport Opportunities CSV to a Raster — tph_to_raster • tphconv</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Convert Transport Opportunities CSV to a Raster — tph_to_raster"><meta name="description" content="Reads a CSV file (optionally gzipped) of public transport accessibility data,
reprojects point coordinates, and rasterizes the data onto a regular grid.
Optionally, it can add a second raster layer containing INSPIRE-compliant
grid cell IDs."><meta property="og:description" content="Reads a CSV file (optionally gzipped) of public transport accessibility data,
reprojects point coordinates, and rasterizes the data onto a regular grid.
Optionally, it can add a second raster layer containing INSPIRE-compliant
grid cell IDs."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">tphconv</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/e-kotov/tphconv/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Convert Transport Opportunities CSV to a Raster</h1>
      <small class="dont-index">Source: <a href="https://github.com/e-kotov/tphconv/blob/main/R/tph_to_raster.R" class="external-link"><code>R/tph_to_raster.R</code></a></small>
      <div class="d-none name"><code>tph_to_raster.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Reads a CSV file (optionally gzipped) of public transport accessibility data,
reprojects point coordinates, and rasterizes the data onto a regular grid.
Optionally, it can add a second raster layer containing INSPIRE-compliant
grid cell IDs.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">tph_to_raster</span><span class="op">(</span></span>
<span>  <span class="va">input_file</span>,</span>
<span>  out_column_name <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  crs_src <span class="op">=</span> <span class="fl">4326</span>,</span>
<span>  crs_dst <span class="op">=</span> <span class="fl">3035</span>,</span>
<span>  x_offset <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  y_offset <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  resolution_m <span class="op">=</span> <span class="fl">1000</span>,</span>
<span>  out_raster_file <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  add_id <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-input-file">input_file<a class="anchor" aria-label="anchor" href="#arg-input-file"></a></dt>
<dd><p>Character. Path to the input CSV (gzipped) containing at least
columns 'lon', 'lat', and one numeric data column.</p></dd>


<dt id="arg-out-column-name">out_column_name<a class="anchor" aria-label="anchor" href="#arg-out-column-name"></a></dt>
<dd><p>Character or NULL. Name to assign to the data column in the output raster.
If NULL (default), the original column name from the CSV is used.</p></dd>


<dt id="arg-crs-src">crs_src<a class="anchor" aria-label="anchor" href="#arg-crs-src"></a></dt>
<dd><p>Integer or character. Source CRS (EPSG code or WKT); default is 4326.</p></dd>


<dt id="arg-crs-dst">crs_dst<a class="anchor" aria-label="anchor" href="#arg-crs-dst"></a></dt>
<dd><p>Integer or character. Destination CRS (EPSG code or WKT); default is 3035.</p></dd>


<dt id="arg-x-offset">x_offset<a class="anchor" aria-label="anchor" href="#arg-x-offset"></a></dt>
<dd><p>Numeric. An offset subtracted from the projected x-coordinate.
This is used to convert the source point's reference (e.g., a lower-left
corner) to the cell's theoretical centroid. For centroid-based data like
GISCO, the default of 0 is correct.</p></dd>


<dt id="arg-y-offset">y_offset<a class="anchor" aria-label="anchor" href="#arg-y-offset"></a></dt>
<dd><p>Numeric. An offset subtracted from the projected y-coordinate,
similar to <code>x_offset</code>.</p></dd>


<dt id="arg-resolution-m">resolution_m<a class="anchor" aria-label="anchor" href="#arg-resolution-m"></a></dt>
<dd><p>Numeric. Cell size in units of the destination CRS; default is 1000 (1 km).</p></dd>


<dt id="arg-out-raster-file">out_raster_file<a class="anchor" aria-label="anchor" href="#arg-out-raster-file"></a></dt>
<dd><p>Character or NULL. Output filename for the raster. If provided, the raster is
written to this file (creating directories as needed) and the filename is returned.
If NULL (default), the SpatRaster is returned directly.</p></dd>


<dt id="arg-add-id">add_id<a class="anchor" aria-label="anchor" href="#arg-add-id"></a></dt>
<dd><p>Logical. If <code>TRUE</code> (the default), a second layer named "id" is
added to the raster. This is a factor layer where the labels correspond to
the INSPIRE-compliant grid cell ID for each cell.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>If <code>out_raster_file</code> is <code>NULL</code>, a <code><a href="https://rspatial.github.io/terra/reference/SpatRaster-class.html" class="external-link">terra::SpatRaster</a></code> object. This will be a
multi-layer raster if <code>add_id = TRUE</code>. If <code>out_raster_file</code> is provided, a character
string of the file path is returned.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="va">tph_file</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span></span></span>
<span class="r-in"><span> <span class="st">"extdata"</span>,</span></span>
<span class="r-in"><span> <span class="st">"ver1_0_LU_1km_pt_ppl_within_10-20_min.csv.gz"</span>,</span></span>
<span class="r-in"><span> package <span class="op">=</span> <span class="st">"tphconv"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://rspatial.org/" class="external-link">terra</a></span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> terra 1.8.60</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Convert a CSV to a raster with the ID layer (default)</span></span></span>
<span class="r-in"><span><span class="va">r_with_id</span> <span class="op">&lt;-</span> <span class="fu">tph_to_raster</span><span class="op">(</span>input_file <span class="op">=</span> <span class="va">tph_file</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rspatial.github.io/terra/reference/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">r_with_id</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="tph_to_raster-1.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Egor Kotov.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

