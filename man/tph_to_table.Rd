% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/tph_to_table.R
\name{tph_to_table}
\alias{tph_to_table}
\title{Generate a Table of Grid IDs and Values from a TPH CSV}
\usage{
tph_to_table(
  input_file,
  out_column_name = NULL,
  crs_src = 4326,
  crs_dst = 3035,
  x_offset = -500,
  y_offset = -500,
  resolution_m = 1000,
  add_centroid_coords = FALSE,
  add_gisco_corner_coords = FALSE
)
}
\arguments{
\item{input_file}{Character. Path to the input CSV (gzipped) containing at least
columns 'lon', 'lat', and one numeric data column.}

\item{out_column_name}{Character or NULL. Name to assign to the data column in the output raster.
If NULL (default), the original column name from the CSV is used.}

\item{crs_src}{Integer or character. Source CRS (EPSG code or WKT); default is 4326.}

\item{crs_dst}{Integer or character. Destination CRS (EPSG code or WKT); default is 3035.}

\item{x_offset}{Numeric. An offset subtracted from the projected x-coordinate.
This is used to convert the source point's reference (e.g., a lower-left
corner) to the cell's theoretical centroid. For centroid-based data like
GISCO, the default of 0 is correct.}

\item{y_offset}{Numeric. An offset subtracted from the projected y-coordinate,
similar to \code{x_offset}.}

\item{resolution_m}{Numeric. Cell size in units of the destination CRS; default is 1000 (1 km).}

\item{add_centroid_coords}{Logical. If \code{TRUE}, adds the original \code{lon} and \code{lat}
as well as the projected centroid coordinates (\code{x_centroid}, \code{y_centroid})
to the output table. Defaults to \code{FALSE}.}

\item{add_gisco_corner_coords}{Logical. If \code{TRUE}, adds the projected lower-left
(south-west) corner coordinates (\code{x_ll}, \code{y_ll}) of the grid cell to the
output table. Defaults to \code{FALSE}.}
}
\value{
A \code{data.frame} with the \code{gisco_id}, the data value, and optional
coordinate columns.
}
\description{
Reads a transport opportunities CSV file and efficiently generates a table
containing the corresponding INSPIRE/GISCO grid cell IDs and data values.
}
\details{
This function is the fastest method for converting TPH data, as it operates
directly on coordinates and avoids creating any intermediate spatial objects
(rasters, polygons, or sf points).
}
\examples{
tph_file <- system.file(
  "extdata",
  "ver1_0_LU_1km_pt_ppl_within_10-20_min.csv.gz",
  package = "tphconv"
)

# Generate a table with both centroid and corner coordinates
full_table <- tph_to_table(
  tph_file,
  add_centroid_coords = TRUE,
  add_gisco_corner_coords = TRUE
)
head(full_table)

}
